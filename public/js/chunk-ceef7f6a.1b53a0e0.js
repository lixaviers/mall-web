(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ceef7f6a"],{"07a2":function(e,t,i){var o=i("8a1c");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},"0d7a":function(e,t,i){"use strict";var o=i("b2a2"),r=i("8a1c"),s=i("857c"),n=i("2732"),a=i("ef4c"),l=i("38eb"),c=i("d88d"),d=i("59da"),u=i("5139"),p=i("efe2"),m=[].push,g=Math.min,h=4294967295,f=!p((function(){return!RegExp(h,"y")}));o("split",2,(function(e,t,i){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var o=String(n(this)),s=void 0===i?h:i>>>0;if(0===s)return[];if(void 0===e)return[o];if(!r(e))return t.call(o,e,s);var a,l,c,d=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,f=new RegExp(e.source,p+"g");while(a=u.call(f,o)){if(l=f.lastIndex,l>g&&(d.push(o.slice(g,a.index)),a.length>1&&a.index<o.length&&m.apply(d,a.slice(1)),c=a[0].length,g=l,d.length>=s))break;f.lastIndex===a.index&&f.lastIndex++}return g===o.length?!c&&f.test("")||d.push(""):d.push(o.slice(g)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var r=n(this),s=void 0==t?void 0:t[e];return void 0!==s?s.call(t,r,i):o.call(String(r),t,i)},function(e,r){var n=i(o,e,this,r,o!==t);if(n.done)return n.value;var u=s(e),p=String(this),m=a(u,RegExp),v=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),b=new m(f?u:"^(?:"+u.source+")",y),w=void 0===r?h:r>>>0;if(0===w)return[];if(0===p.length)return null===d(b,p)?[p]:[];var F=0,C=0,S=[];while(C<p.length){b.lastIndex=f?C:0;var x,k=d(b,f?p:p.slice(C));if(null===k||(x=g(c(b.lastIndex+(f?0:C)),p.length))===F)C=l(p,C,v);else{if(S.push(p.slice(F,C)),S.length===w)return S;for(var L=1;L<=k.length-1;L++)if(S.push(k[L]),S.length===w)return S;C=F=x}}return S.push(p.slice(F)),S}]}),!f)},1784:function(e,t,i){"use strict";var o=i("1c8b"),r=i("58d8").left,s=i("d7e1"),n=i("ff9c"),a=s("reduce"),l=n("reduce",{1:0});o({target:"Array",proto:!0,forced:!a||!l},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2eeb":function(e,t,i){"use strict";var o=i("1c8b"),r=i("5dfd").map,s=i("1ea7"),n=i("ff9c"),a=s("map"),l=n("map");o({target:"Array",proto:!0,forced:!a||!l},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"368d":function(e,t,i){"use strict";var o=i("c526"),r=i.n(o);r.a},"4e4e":function(e,t){tinymce.addI18n("zh_CN",{Cut:"剪切","Heading 5":"标题5","Header 2":"标题2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持对剪贴板的访问，请使用Ctrl+X/C/V键进行复制粘贴。","Heading 4":"标题4",Div:"Div区块","Heading 2":"标题2",Paste:"粘贴",Close:"关闭","Font Family":"字体",Pre:"预格式文本","Align right":"右对齐","New document":"新文档",Blockquote:"引用","Numbered list":"编号列表","Heading 1":"标题1",Headings:"标题","Increase indent":"增加缩进",Formats:"格式",Headers:"标题","Select all":"全选","Header 3":"标题3",Blocks:"区块",Undo:"撤消",Strikethrough:"删除线","Bullet list":"项目符号","Header 1":"标题1",Superscript:"上标","Clear formatting":"清除格式","Font Sizes":"字号",Subscript:"下标","Header 6":"标题6",Redo:"重复",Paragraph:"段落",Ok:"确定",Bold:"粗体",Code:"代码",Italic:"斜体","Align center":"居中","Header 5":"标题5","Heading 6":"标题6","Heading 3":"标题3","Decrease indent":"减少缩进","Header 4":"标题4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Underline:"下划线",Cancel:"取消",Justify:"两端对齐",Inline:"文本",Copy:"复制","Align left":"左对齐","Visual aids":"网格线","Lower Greek":"小写希腊字母",Square:"方块",Default:"默认","Lower Alpha":"小写英文字母",Circle:"空心圆",Disc:"实心圆","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Lower Roman":"小写罗马字母","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。",Name:"名称",Anchor:"锚点",Id:"标识符","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character":"特殊符号","Source code":"源代码",Language:"语言","Insert/Edit code sample":"插入/编辑代码示例",B:"B",R:"R",G:"G",Color:"颜色","Right to left":"从右到左","Left to right":"从左到右",Emoticons:"表情",Robots:"机器人","Document properties":"文档属性",Title:"标题",Keywords:"关键词",Encoding:"编码",Description:"描述",Author:"作者",Fullscreen:"全屏","Horizontal line":"水平分割线","Horizontal space":"水平边距","Insert/edit image":"插入/编辑图片",General:"普通",Advanced:"高级",Source:"地址",Border:"边框","Constrain proportions":"保持纵横比","Vertical space":"垂直边距","Image description":"图片描述",Style:"样式",Dimensions:"大小","Insert image":"插入图片",Image:"图片","Zoom in":"放大",Contrast:"对比度",Back:"后退",Gamma:"伽马值","Flip horizontally":"水平翻转",Resize:"调整大小",Sharpen:"锐化","Zoom out":"缩小","Image options":"图片选项",Apply:"应用",Brightness:"亮度","Rotate clockwise":"顺时针旋转","Rotate counterclockwise":"逆时针旋转","Edit image":"编辑图片","Color levels":"颜色层次",Crop:"裁剪",Orientation:"方向","Flip vertically":"垂直翻转",Invert:"反转","Date/time":"日期/时间","Insert date/time":"插入日期/时间","Remove link":"删除链接",Url:"地址","Text to display":"显示文字",Anchors:"锚点","Insert link":"插入链接",Link:"链接","New window":"在新窗口打开",None:"无","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Paste or type a link":"粘贴或输入链接",Target:"打开方式","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","Insert/edit link":"插入/编辑链接","Insert/edit video":"插入/编辑视频",Media:"媒体","Alternative source":"镜像","Paste your embed code below:":"将内嵌代码粘贴在下面:","Insert video":"插入视频",Poster:"封面","Insert/edit media":"插入/编辑媒体",Embed:"内嵌","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览",Print:"打印",Save:"保存","Could not find the specified string.":"未找到搜索内容.",Replace:"替换",Next:"下一个","Whole words":"全字匹配","Find and replace":"查找和替换","Replace with":"替换为",Find:"查找","Replace all":"全部替换","Match case":"区分大小写",Prev:"上一个",Spellcheck:"拼写检查",Finish:"完成","Ignore all":"全部忽略",Ignore:"忽略","Add to Dictionary":"添加到字典","Insert row before":"在上方插入",Rows:"行",Height:"高","Paste row after":"粘贴到下方",Alignment:"对齐方式","Border color":"边框颜色","Column group":"列组",Row:"行","Insert column before":"在左侧插入","Split cell":"拆分单元格","Cell padding":"单元格内边距","Cell spacing":"单元格外间距","Row type":"行类型","Insert table":"插入表格",Body:"表体",Caption:"标题",Footer:"表尾","Delete row":"删除行","Paste row before":"粘贴到上方",Scope:"范围","Delete table":"删除表格","H Align":"水平对齐",Top:"顶部对齐","Header cell":"表头单元格",Column:"列","Row group":"行组",Cell:"单元格",Middle:"垂直居中","Cell type":"单元格类型","Copy row":"复制行","Row properties":"行属性","Table properties":"表格属性",Bottom:"底部对齐","V Align":"垂直对齐",Header:"表头",Right:"右对齐","Insert column after":"在右侧插入",Cols:"列","Insert row after":"在下方插入",Width:"宽","Cell properties":"单元格属性",Left:"左对齐","Cut row":"剪切行","Delete column":"删除列",Center:"居中","Merge cells":"合并单元格","Insert template":"插入模板",Templates:"模板","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Text color":"文字颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Words: {0}":"字数：{0}",Insert:"插入",File:"文件",Edit:"编辑","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助",Tools:"工具",View:"视图",Table:"表格",Format:"格式"})},"58d8":function(e,t,i){var o=i("0c3c"),r=i("3553"),s=i("692f"),n=i("d88d"),a=function(e){return function(t,i,a,l){o(i);var c=r(t),d=s(c),u=n(c.length),p=e?u-1:0,m=e?-1:1;if(a<2)while(1){if(p in d){l=d[p],p+=m;break}if(p+=m,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=m)p in d&&(l=i(l,d[p],p,c));return l}};e.exports={left:a(!1),right:a(!0)}},"783d":function(e,t,i){var o=i("90fb"),r=o("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[r]=!1,"/./"[e](t)}catch(o){}}return!1}},"8cd7":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gooods__edit"},[i("el-card",{attrs:{shadow:"always"}},[i("el-form",{ref:"goodsForm",attrs:{model:e.goodsForm,"label-width":"120px",rules:e.rules}},[i("el-form-item",{attrs:{label:"商品名",prop:"goodsName"}},[i("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"商品名",maxlength:"50","show-word-limit":""},model:{value:e.goodsForm.goodsName,callback:function(t){e.$set(e.goodsForm,"goodsName",t)},expression:"goodsForm.goodsName"}})],1),i("el-form-item",{attrs:{label:"商品类目",prop:"goodsCategorySelectList"}},[i("el-cascader",{staticStyle:{width:"400px"},attrs:{props:e.props,options:e.goodsCategoryList,placeholder:"请选择"},on:{change:e.categoryChange},model:{value:e.goodsForm.goodsCategorySelectList,callback:function(t){e.$set(e.goodsForm,"goodsCategorySelectList",t)},expression:"goodsForm.goodsCategorySelectList"}})],1),i("el-form-item",{attrs:{label:"商品品牌",prop:"brandId"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.goodsForm.brandId,callback:function(t){e.$set(e.goodsForm,"brandId",t)},expression:"goodsForm.brandId"}},e._l(e.goodsBrandList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.brandName,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"划线价（元）"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.goodsForm.originalPrice,callback:function(t){e.$set(e.goodsForm,"originalPrice",t)},expression:"goodsForm.originalPrice"}})],1),i("el-form-item",{attrs:{label:"启用规格"}},[i("el-checkbox",{attrs:{size:"large"},model:{value:e.goodsForm.isMoreSpec,callback:function(t){e.$set(e.goodsForm,"isMoreSpec",t)},expression:"goodsForm.isMoreSpec"}}),i("span",{staticClass:"tip"},[e._v(" 启用商品规格后，商品的价格及库存以商品规格为准")])],1),e.goodsForm.isMoreSpec?i("div",{staticStyle:{padding:"0 40px 0 60px"}},[0!=e.specifications.length?e._l(e.specifications,(function(t,o){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.goodsForm.isMoreSpec,expression:"goodsForm.isMoreSpec"}],key:o,staticClass:"spec"},[i("div",[i("el-row",{staticClass:"mt10 mb10 group__title name"},[e._v(" 规格名: "),i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入规格名，例如：尺寸"},model:{value:t.name,callback:function(i){e.$set(t,"name","string"===typeof i?i.trim():i)},expression:"spec.name"}}),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",disabled:1===e.specifications.length},on:{click:function(t){return e.deleteType(o)}}},[e._v("删除规格")])],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:t.name,expression:"spec.name"}],staticClass:"group__title"},[e._v(" 规格值: "),i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入规格值，例如：XXL"},model:{value:e.newSpecName[o],callback:function(t){e.$set(e.newSpecName,o,"string"===typeof t?t.trim():t)},expression:"newSpecName[index]"}}),i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(i){return e.addSpec(t.values,e.newSpecName[o],o)}}},[e._v("添加")])],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:t.values.length>0,expression:"spec.values.length > 0"}],staticClass:"group__title"},[e._v(" 规格值: "),e._l(t.values,(function(o,r){return i("div",{key:r,staticClass:"value"},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"",disabled:!1},on:{blur:function(i){return e.modiSpec(o,t.values,r)}},model:{value:t.values[r],callback:function(i){e.$set(t.values,r,i)},expression:"spec.values[index]"}},[i("el-button",{attrs:{slot:"append"},on:{click:function(i){return e.deleteSpec(r,t.values)}},slot:"append"},[e._v("删除")])],1)],1)})),i("br"),i("br")],2)],1)])})):e._e(),i("el-button",{attrs:{type:"primary"},on:{click:e.addSpecificationName}},[e._v("添加规格")]),i("div",{staticClass:"mt20 mb20"},[[0!=e.specifications.length?[i("el-table",{key:"aTable",attrs:{data:e.tableData,border:"","span-method":e.arraySpanMethod}},[e._l(e.specifications,(function(e,t){return i("el-table-column",{key:t,attrs:{prop:"spec"+t,label:e.name}})})),i("el-table-column",{attrs:{prop:"prices.price",label:"价格","min-width":"200","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{size:"mini",min:0,max:99999999.99,precision:2},model:{value:t.row.prices.price,callback:function(i){e.$set(t.row.prices,"price",i)},expression:"scope.row.prices.price"}})]}}],null,!1,2180848836)}),i("el-table-column",{attrs:{prop:"prices.inventory",label:"库存","min-width":"200","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input-number",{attrs:{size:"mini",min:0,max:99999999,precision:0},model:{value:t.row.prices.inventory,callback:function(i){e.$set(t.row.prices,"inventory",i)},expression:"scope.row.prices.inventory"}})]}}],null,!1,2459819119)})],2)]:e._e()]],2)],2):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.goodsForm.isMoreSpec,expression:"!goodsForm.isMoreSpec"}]},[i("el-form-item",{attrs:{label:"价格（元）"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{min:0,max:99999999.99,precision:2},model:{value:e.goodsForm.listPrice,callback:function(t){e.$set(e.goodsForm,"listPrice",t)},expression:"goodsForm.listPrice"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.priceErrorFlag,expression:"priceErrorFlag"}],staticClass:"el-form-item__error"},[e._v("请输入价格")])],1),i("el-form-item",{attrs:{label:"库存"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{min:1,max:99999999,precision:0},model:{value:e.goodsForm.inventory,callback:function(t){e.$set(e.goodsForm,"inventory",t)},expression:"goodsForm.inventory"}})],1)],1),i("el-form-item",{attrs:{label:"限购"}},[i("el-checkbox",{attrs:{size:"large"},model:{value:e.isPerPersonLimit,callback:function(t){e.isPerPersonLimit=t},expression:"isPerPersonLimit"}},[e._v("限制每人可购买数量")])],1),e.isPerPersonLimit?i("el-form-item",{attrs:{label:"限购"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{min:0,max:99999999,precision:0},model:{value:e.goodsForm.perPersonLimit,callback:function(t){e.$set(e.goodsForm,"perPersonLimit",t)},expression:"goodsForm.perPersonLimit"}}),e._v(" 个 ")],1):e._e(),i("el-form-item",{attrs:{label:"起订量",prop:"minimumQuantity"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{min:1,max:99999999,precision:0},model:{value:e.goodsForm.minimumQuantity,callback:function(t){e.$set(e.goodsForm,"minimumQuantity",t)},expression:"goodsForm.minimumQuantity"}}),e._v(" 元 ")],1),i("el-form-item",{attrs:{label:"快递运费"}},[i("el-input-number",{staticStyle:{width:"200px"},attrs:{min:0,max:99999999,precision:2},model:{value:e.goodsForm.expressFreight,callback:function(t){e.$set(e.goodsForm,"expressFreight",t)},expression:"goodsForm.expressFreight"}}),e._v(" 元 ")],1),i("el-form-item",{attrs:{label:"商品图片"}},[i("el-upload",{attrs:{action:"/api/file/upload","list-type":"picture-card","on-success":e.fileSuccess,"on-remove":e.fileRemove,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),i("el-form-item",{attrs:{label:"商品详情",prop:"description"}},[i("tinymce",{attrs:{width:995,height:300},model:{value:e.goodsForm.description,callback:function(t){e.$set(e.goodsForm,"description",t)},expression:"goodsForm.description"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.onSubmit("goodsForm")}}},[e._v(e._s(e.buttonText))]),i("el-button",{on:{click:function(t){return e.$router.push({name:"goodsList"})}}},[e._v("取消")])],1)],1)],1)],1)},r=[],s=(i("f3dd"),i("0a51"),i("dbb3"),i("fe59"),i("b130"),i("2eeb"),i("1784"),i("ea69"),i("e18c"),i("e35a"),i("90aa"),i("0d7a"),i("08ba"),i("af86"),i("c276")),n=i("09bb"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce__container"},[i("textarea",{attrs:{id:e.tinymceId}}),e._v(" "),i("div",{staticClass:"tinymce__btn__container"},[i("el-upload",{attrs:{action:"/api/file/upload","on-success":e.handleSuccess,"show-file-list":!1}},[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-upload"}),e._v("上传图片")])],1)],1)])},l=[],c=(i("b4fb"),i("513c"),i("4e4e"),["advlist anchor autolink autosave code codesample colorpicker colorpicker\n    contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime\n    legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace\n    spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]),d=["bold italic underline strikethrough alignleft aligncenter\n    alignright outdent indent  blockquote undo redo removeformat","hr bullist numlist link image charmap\t preview anchor pagebreak\n    fullscreen insertdatetime media table forecolor backcolor"],u={name:"tinymce",props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360},width:{type:Number,required:!1,default:720}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date}},watch:{value:function(e){var t=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(t.tinymceId).setContent(e)}))}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{handleSuccess:function(e,t,i){window.tinymce.get(this.tinymceId).insertContent('<img key="'.concat(t.uid,'" src="').concat(e.data,'" >'))},initTinymce:function(){var e=this,t=this;window.tinymce.init({selector:"#".concat(this.tinymceId),width:this.width,height:this.height,language:"zh_CN",body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:d,menubar:!1,plugins:c,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,init_instance_callback:function(i){t.value&&i.setContent(t.value),t.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){e.hasChange=!0,e.$emit("input",i.getContent())}))}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()}},destroyed:function(){this.destroyTinymce()}},p=u,m=(i("368d"),i("9ca4")),g=Object(m["a"])(p,a,l,!1,null,null,null),h=g.exports,f={components:{Tinymce:h},data:function(){return{rules:{goodsName:[{required:!0,message:"请输入商品名称",trigger:"blur"}],brandId:[{required:!0,message:"请选择品牌",trigger:"blur"}],goodsCategorySelectList:[{type:"array",required:!0,message:"请选择商品类目",trigger:"change"}],minimumQuantity:[{required:!0,message:"请输入起订量",trigger:"blur"}],description:[{required:!0,message:"请输入商品详情",trigger:"blur"}]},props:{label:"categoryName",value:"id",children:"childCategoryList"},priceErrorFlag:!1,goodsCategoryList:[],goodsBrandList:[],isPerPersonLimit:!1,goodsForm:{id:"",description:"",perPersonLimit:0,minimumQuantity:1,goodsName:"",goodsCategorySelectList:null,goodsCategoryId:"",brandId:"",price:"",inventory:"",originalPrice:"",skuList:[],isMoreSpec:null,expressFreight:0},loading:!1,buttonText:"立即创建",arr:[],specifications:[],specPrices:[],newSpecName:["",""],fileList:[]}},computed:{tableData:function(){for(var e=this.specPrices,t=0;t<e.length;t++){var i=e[t].specifications.filter((function(e){return""!=e}));if(i)for(var o=0;o<e[t].specifications.length;o++)e[t]["spec"+o]=e[t].specifications[o]}return e}},created:function(){var e=this,t=this.$route.query.id;if(t)this.buttonText="立即保存",n["a"].goodsGet(t).then((function(t){if(e.goodsForm.id=t.data.id,e.goodsForm.brandId=t.data.brandId,e.goodsForm.pictureUrls=t.data.pictureUrls,e.goodsForm.pictureUrls)for(var i=e.goodsForm.pictureUrls.split(","),o=0;o<i.length;o++)e.fileList.push({url:i[o]});if(e.goodsForm.description=t.data.description,e.goodsForm.perPersonLimit=t.data.perPersonLimit,e.goodsForm.perPersonLimit>0&&(e.isPerPersonLimit=!0),e.goodsForm.goodsName=t.data.goodsName,e.goodsForm.goodsCategoryId=t.data.goodsCategoryId,e.getGoodsBrandList(),e.goodsForm.listPrice=t.data.listPrice,e.goodsForm.minimumQuantity=t.data.minimumQuantity,e.goodsForm.originalPrice=t.data.originalPrice,e.goodsForm.skuList=t.data.skuList,e.goodsForm.isMoreSpec=t.data.isMoreSpec,e.goodsForm.expressFreight=t.data.expressFreight,e.getCategoryData(),e.specifications=t.data.specificationList,e.goodsForm.isMoreSpec){for(var r=[],s=t.data.skuList,n=0;n<s.length;n++){r.push({prices:{inventory:s[n].inventory,price:s[n].price}});var a=s[n].specValue.split(",");r[n].specifications=a,r[n].id=s[n].id;for(var l=0;l<a.length;l++)r[n]["spec"+l]=a[l]}e.specPrices=r}else e.goodsForm.inventory=t.data.skuList[0].inventory,e.specifications=[],e.specifications.push({name:"",values:[]}),e.specPrices=[]}));else{var i={name:"",values:[]};this.specifications.push(i),this.goodsForm.isMoreSpec=!1,this.specPrices=[],this.getCategoryData()}},methods:{fileRemove:function(e,t){for(var i="",o=0;o<t.length;o++)i+=t[o].url,o!=t.length-1&&(i+=",");this.goodsForm.pictureUrls=i},fileSuccess:function(e,t,i){this.fileList.push(t),this.goodsForm.pictureUrls?this.goodsForm.pictureUrls+=","+e.data:this.goodsForm.pictureUrls=e.data},categoryChange:function(e){this.goodsForm.goodsCategoryId=e[e.length-1],this.getGoodsBrandList()},getGoodsBrandList:function(){var e=this;n["a"].goodsBrandGet(this.goodsForm.goodsCategoryId).then((function(t){e.goodsBrandList=t.data}))},getCategoryCheck:function(){var e=this,t=this.goodsForm.goodsCategoryId;this.goodsCategoryList.forEach((function(i,o){t!==i.id?i.childCategoryList&&i.childCategoryList.forEach((function(o){t!==o.id?o.childCategoryList&&o.childCategoryList.forEach((function(r){t!==r.id?r.childCategoryList&&r.childCategoryList.forEach((function(s){t!==s.id||(e.goodsForm.goodsCategorySelectList=[i.id,o.id,r.id,s.id])})):e.goodsForm.goodsCategorySelectList=[i.id,o.id,r.id]})):e.goodsForm.goodsCategorySelectList=[i.id,o.id]})):e.goodsForm.goodsCategorySelectList=[i.id]}))},getCategoryData:function(){var e=this;n["a"].goodsCategoryGetTree(2).then((function(t){e.goodsCategoryList=t.data,e.getCategoryCheck()}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(t.goodsForm.isMoreSpec||t.goodsForm.listPrice){t.loading=!0,t.priceErrorFlag=!1,t.isPerPersonLimit||(t.goodsForm.perPersonLimit=0);var i=t.goodsForm.goodsCategorySelectList;t.goodsForm.goodsCategoryId=i[i.length-1];var o=t.tableData;if(t.goodsForm.isMoreSpec){for(var r=0;r<o.length;r++){for(var a="",l=0;l<o[r].specifications.length;l++)a+=o[r].specifications[l],l!=o[r].specifications.length-1&&(a+=",");o[r].specValue=a,o[r].price=o[r].prices.price,o[r].inventory=o[r].prices.inventory}t.goodsForm.skuList=o,t.goodsForm.goodsSpecificationList=t.specifications}else t.goodsForm.skuList&&0!=t.goodsForm.skuList.length?(t.goodsForm.skuList[0].price=t.goodsForm.listPrice,t.goodsForm.skuList[0].inventory=t.goodsForm.inventory):t.goodsForm.skuList=[{price:t.goodsForm.listPrice,inventory:t.goodsForm.inventory}];n["a"].goodsAdd(t.goodsForm).then((function(e){t.goodsForm.id?s["a"].messageSuccess("保存成功"):s["a"].messageSuccess("创建成功"),t.$router.push({name:"goodsList"})})).finally((function(e){t.loading&&(t.loading=!1)}))}else t.priceErrorFlag=!0}))},arraySpanMethod:function(e){e.row,e.column,e.rowIndex,e.columnIndex},renderHeader:function(e,t){var i=t.column,o=(t.$index,this),r=o.tableData;return e("div",[e("span",i.label),e("i",{class:"el-icon-plus",style:"color:#17b3a3;margin-left:5px;cursor: pointer;",on:{click:function(){o.$prompt("","批量修改本列",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){var t=e.value;r.forEach((function(e){"prices.price"==i.property&&(e.prices.price=t),"prices.inventory"==i.property&&(e.prices.inventory=t)})),"stock"==i.property&&o.stockCount()})).catch((function(){}))}}})])},deleteType:function(e){if(1!==this.specifications.length){var t=confirm("确定删除规格名么?");t&&(this.specifications.splice(e,1),this.mySpecPrices(this.specCombinations()))}},deleteSpec:function(e,t){t.splice(e,1),this.mySpecPrices(this.specCombinations())},modiSpec:function(e,t,i){t[i]=e,this.mySpecPrices(this.specCombinations())},addSpecificationName:function(){var e={name:"",values:[]};this.specifications.push(e)},addSpec:function(e,t,i){if(t)if(e.includes(t))alert("规格值名称不能为重复");else{e.push(t);var o=this.specCombinations();this.mySpecPrices(o),this.newSpecName[i]=""}else alert("规格值名称不能为空")},modiPrice:function(){},createAry:function(e){var t=e.reduce((function(e,t){var i=[];return e.forEach((function(e){t.forEach((function(t){i.push(e+","+t)}))})),i}));return t.map((function(e){return e.split(",")}))},specCombinations:function(){for(var e=[],t=0;t<this.specifications.length;t++){var i=this.specifications[t].values;0==i.length&&(i=[""]),e[t]=i}return this.createAry(e)},mySpecPrices:function(e){var t=[],i=e;if(i)for(var o=0;o<i.length;o++){var r={};r.specifications=i[o];var s=this.specPrices.filter((function(e){return e.specifications+""===i[o]+""}));s.length?(r.prices=s[0].prices,r.id=s[0].id):r.prices={price:0,inventory:0},t.push(r)}this.specPrices=t}}},v=f,y=Object(m["a"])(v,o,r,!1,null,null,null);t["default"]=y.exports},"90aa":function(e,t,i){"use strict";var o=i("1c8b"),r=i("07a2"),s=i("2732"),n=i("783d");o({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(s(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},b130:function(e,t,i){"use strict";var o=i("1c8b"),r=i("45af").includes,s=i("258f"),n=i("ff9c"),a=n("indexOf",{ACCESSORS:!0,1:0});o({target:"Array",proto:!0,forced:!a},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},c526:function(e,t,i){},dbb3:function(e,t,i){"use strict";var o=i("1c8b"),r=i("5dfd").filter,s=i("1ea7"),n=i("ff9c"),a=s("filter"),l=n("filter");o({target:"Array",proto:!0,forced:!a||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},ea69:function(e,t,i){"use strict";var o=i("1c8b"),r=i("e1d6"),s=i("3da3"),n=i("d88d"),a=i("3553"),l=i("1ca1"),c=i("1bbd"),d=i("1ea7"),u=i("ff9c"),p=d("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,f=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var i,o,d,u,p,m,y=a(this),b=n(y.length),w=r(e,b),F=arguments.length;if(0===F?i=o=0:1===F?(i=0,o=b-w):(i=F-2,o=h(g(s(t),0),b-w)),b+i-o>f)throw TypeError(v);for(d=l(y,o),u=0;u<o;u++)p=w+u,p in y&&c(d,u,y[p]);if(d.length=o,i<o){for(u=w;u<b-o;u++)p=u+o,m=u+i,p in y?y[m]=y[p]:delete y[m];for(u=b;u>b-o+i;u--)delete y[u-1]}else if(i>o)for(u=b-o;u>w;u--)p=u+o-1,m=u+i-1,p in y?y[m]=y[p]:delete y[m];for(u=0;u<i;u++)y[u+w]=arguments[u+2];return y.length=b-o+i,d}})}}]);
//# sourceMappingURL=chunk-ceef7f6a.1b53a0e0.js.map